<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java + Selenium + API - Interview Prep Practice</title>
    <link rel="stylesheet" href="styles-modern.css">
    <link rel="stylesheet" href="styles.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2563eb">
    <meta name="background-color" content="#2563eb">
    <meta name="display" content="standalone">
    <meta name="start_url" content="/">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180x180.png">

    <!-- Apple PWA Status Bar -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Interview Prep">

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileImage" content="assets/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2563eb">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-brand">
                    <span class="header-brand-icon">üéØ</span>
                    <div>
                        <div class="header-title">Interview Prep Practice Portal</div>
                        <div class="subtitle text-secondary">Java + Selenium + API Testing</div>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="settingsBtn" class="header-btn" title="Settings">
                        <span>‚öôÔ∏è</span>
                    </button>
                    <button id="darkModeToggle" class="header-btn" title="Toggle Dark Mode">
                        <span class="dark-mode-icon">üåô</span>
                    </button>
                </div>
            </div>

            <!-- Experience Level Selector -->
            <div class="container">
                <div class="card mb-6">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label" for="experienceLevel">Your Experience Level:</label>
                            <select id="experienceLevel" class="form-input form-select">
                                <option value="junior">Junior (0-3 Years) - ‚Çπ3-8 LPA</option>
                                <option value="mid">Mid-Level (4-7 Years) - ‚Çπ8-15 LPA</option>
                                <option value="senior" selected>Senior (8-12 Years) - ‚Çπ15-40 LPA</option>
                            </select>
                            <span class="text-secondary" id="experienceInfo">Senior SDET, Test Architect, QA Lead</span>
                        </div>
                    </div>
                </div>

                <div class="card mb-6">
                    <div class="card-body">
                        <div class="grid grid-cols-2">
                            <div class="text-center">
                                <span class="text-secondary">Days Completed:</span>
                                <div class="text-2xl font-bold text-primary" id="completedDays">0</div>
                            </div>
                            <div class="text-center">
                                <span class="text-secondary">Total Progress:</span>
                                <div class="text-2xl font-bold text-primary" id="totalProgress">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar - Week/Day Navigation -->
            <aside class="sidebar">
                <!-- Navigation Tabs -->
                <div class="nav-tabs">
                    <button class="nav-tab" data-tab="dashboard">üìä Dashboard</button>
                    <button class="nav-tab active" data-tab="schedule">üìÖ Schedule</button>
                    <button class="nav-tab" data-tab="questions">‚ùì Interview Questions</button>
                    <button class="nav-tab" data-tab="practice">üéØ Selenium Practice</button>
                    <button class="nav-tab" data-tab="admin" style="display: none;">üéõÔ∏è Admin Panel</button>
                    <button class="nav-tab" data-tab="social">üë• Social Learning</button>
                    <button class="nav-tab" data-tab="integrations">üîó Integrations</button>
                </div>

                <!-- Dashboard Tab Content -->
                <div class="tab-content" id="dashboardTab">
                    <div class="dashboard-content">
                        <h3>üìä Your Progress Dashboard</h3>

                        <!-- Overall Progress Summary -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üìà Overall Progress</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-3 mb-6">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-3xl font-bold text-primary" id="dashboardDaysCompleted">0</div>
                                            <div class="text-secondary">Days Completed</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-3xl font-bold text-secondary" id="dashboardTotalDays">30</div>
                                            <div class="text-secondary">Total Days</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-3xl font-bold text-success" id="dashboardCompletionRate">0%</div>
                                            <div class="text-secondary">Completion Rate</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Progress Bar -->
                                <div class="progress mb-4">
                                    <div class="progress-bar" id="dashboardProgressBar" style="width: 0%"></div>
                                </div>
                                <div class="text-center">
                                    <span class="text-secondary" id="dashboardProgressText">0% Complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Learning Streak -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üî• Learning Streak</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-2 mb-4">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-danger" id="currentStreak">0</div>
                                            <div class="text-secondary">Current Streak</div>
                                            <div class="text-sm text-tertiary">days</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-warning" id="longestStreak">0</div>
                                            <div class="text-secondary">Longest Streak</div>
                                            <div class="text-sm text-tertiary">days</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="streak-calendar" id="streakCalendar">
                                    <!-- Calendar will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Weekly Breakdown -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üìÖ Weekly Breakdown</h4>
                            </div>
                            <div class="card-body">
                                <div class="weekly-progress" id="weeklyBreakdown">
                                    <!-- Weekly progress will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Questions Statistics -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>‚ùì Questions Progress</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-3 mb-4">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-primary" id="questionsStudied">0</div>
                                            <div class="text-secondary">Questions Studied</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-info" id="totalQuestions">250+</div>
                                            <div class="text-secondary">Total Questions</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-success" id="averageTime">0</div>
                                            <div class="text-secondary">Avg. Time/Question</div>
                                            <div class="text-sm text-tertiary">min</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Category Progress -->
                                <div class="category-progress" id="categoryProgress">
                                    <!-- Category progress bars will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Achievements -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üèÜ Achievements</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-3" id="achievementsGrid">
                                    <!-- Achievements will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Study Goals -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üéØ Study Goals</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-2">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="goal-title font-medium mb-2">Daily Goal</div>
                                            <div class="progress mb-2">
                                                <div class="progress-bar" id="dailyGoalProgress" style="width: 0%"></div>
                                            </div>
                                            <span class="text-sm text-secondary" id="dailyGoalText">0 / 1 day studied</span>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="goal-title font-medium mb-2">Weekly Goal</div>
                                            <div class="progress mb-2">
                                                <div class="progress-bar" id="weeklyGoalProgress" style="width: 0%"></div>
                                            </div>
                                            <span class="text-sm text-secondary" id="weeklyGoalText">0 / 5 days this week</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Study Time Analytics -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>‚è∞ Study Time Analytics</h4>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-3">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-primary" id="totalStudyTime">0h 0m</div>
                                            <div class="text-secondary">Total Study Time</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-secondary" id="averageSessionTime">0m</div>
                                            <div class="text-secondary">Average Session</div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="text-2xl font-bold text-success" id="studySessionsCount">0</div>
                                            <div class="text-secondary">Study Sessions</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Motivational Messages -->
                        <div class="card mb-6">
                            <div class="card-header">
                                <h4>üí™ Motivation</h4>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info mb-4" id="motivationCard">
                                    <div class="motivation-text" id="motivationText">
                                        Keep up the great work! Every step brings you closer to your dream job! üåü
                                    </div>
                                </div>
                                <div class="text-center">
                                    <button class="btn btn-primary" id="getNewMotivation">Get New Motivation</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Schedule Tab Content -->
                <div class="tab-content active" id="scheduleTab">
                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üìÖ Study Schedule</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label" for="trackSelect">Choose Your Track:</label>
                                <select id="trackSelect" class="form-input form-select">
                                    <option value="fast">Fast Track (2-3 Months)</option>
                                    <option value="standard" selected>Standard Track (3-4 Months)</option>
                                </select>
                            </div>

                            <div id="weekList" class="week-list">
                                <!-- Weeks will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interview Questions Tab Content -->
                <div class="tab-content" id="questionsTab">
                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üîç Question Search & Filters</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <div class="search-container">
                                    <input type="text" id="questionSearch" placeholder="üîç Search questions..." class="form-input">
                                    <button id="clearSearch" class="btn btn-secondary btn-sm" style="display: none;">Clear</button>
                                </div>
                                <div class="alert alert-info" id="searchStats" style="display: none;">
                                    <span id="searchResultCount">0</span> questions found
                                </div>
                            </div>

                            <div class="grid grid-cols-2">
                                <div class="form-group">
                                    <label class="form-label" for="categoryFilter">Category:</label>
                                    <select id="categoryFilter" class="form-input form-select">
                                        <option value="all">All Categories</option>
                                        <option value="java">‚òï Java</option>
                                        <option value="selenium">üåê Selenium</option>
                                        <option value="api-testing">üîå API Testing</option>
                                        <option value="testng">üß™ TestNG</option>
                                        <option value="framework">üèóÔ∏è Framework (Senior)</option>
                                        <option value="leadership">üëî Leadership (Senior)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="difficultyFilter">Difficulty:</label>
                                    <select id="difficultyFilter" class="form-input form-select">
                                        <option value="all">All Levels</option>
                                        <option value="Basic">Basic</option>
                                        <option value="Medium">Medium</option>
                                        <option value="Hard">Hard</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>‚ùì Questions List</h3>
                        </div>
                        <div class="card-body">
                            <div id="questionsList" class="questions-list">
                                <!-- Questions will be populated by JavaScript -->
                            </div>

                            <!-- Pagination Controls -->
                            <div class="pagination-container" id="paginationContainer" style="display: none;">
                                <div class="pagination-info mb-4">
                                    <span class="text-secondary" id="paginationInfo">Showing 1-20 of 536 questions</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <button id="prevPageBtn" class="btn btn-secondary" disabled>
                                        <span>‚Üê Previous</span>
                                    </button>
                                    <div class="pagination-numbers flex items-center gap-2" id="paginationNumbers">
                                        <!-- Page numbers will be populated by JavaScript -->
                                    </div>
                                    <button id="nextPageBtn" class="btn btn-secondary" disabled>
                                        <span>Next ‚Üí</span>
                                    </button>
                                </div>
                                <div class="text-center mt-4">
                                    <span class="text-secondary" id="paginationMeta">Page 1 of 27</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Selenium Practice Tab Content -->
                <div class="tab-content" id="practiceTab">
                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üéØ Selenium Practice Form</h3>
                            <p class="text-secondary mb-0">Practice automation testing with comprehensive web elements</p>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info mb-6">
                                <h4 class="mb-2">üìö What You Can Practice</h4>
                                <ul class="mb-0">
                                    <li><strong>Basic Elements:</strong> Input fields, dropdowns, checkboxes, radio buttons</li>
                                    <li><strong>Advanced Interactions:</strong> Sliders, file uploads, date pickers</li>
                                    <li><strong>Dynamic Content:</strong> Modals, alerts, dynamic loading, tooltips</li>
                                    <li><strong>Complex Scenarios:</strong> Tables, tabs, forms validation</li>
                                </ul>
                            </div>

                            <div class="flex items-center gap-4 mb-6">
                                <button id="openPracticeForm" class="btn btn-primary btn-lg">
                                    üöÄ Open Practice Form in New Tab
                                </button>
                                <button id="downloadPracticeForm" class="btn btn-secondary btn-lg">
                                    üì• Download Practice Form
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h4>üéì Selenium Practice Guide</h4>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="mb-3">üîç Locator Strategies</h5>
                                        <ul class="text-sm">
                                            <li>Practice with ID, Name, Class, Tag locators</li>
                                            <li>Master XPath and CSS Selector techniques</li>
                                            <li>Test dynamic element identification</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="mb-3">‚ö° WebDriver Actions</h5>
                                        <ul class="text-sm">
                                            <li>Element interactions (click, type, clear)</li>
                                            <li>Dropdown handling with Select class</li>
                                            <li>File upload and form submissions</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="mb-3">‚è±Ô∏è Wait Strategies</h5>
                                        <ul class="text-sm">
                                            <li>Implicit vs Explicit waits</li>
                                            <li>Dynamic content loading scenarios</li>
                                            <li>Element state change handling</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="mb-3">üîÑ Advanced Scenarios</h5>
                                        <ul class="text-sm">
                                            <li>Alert and modal dialog handling</li>
                                            <li>Tab switching and window management</li>
                                            <li>Table data extraction and manipulation</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4>üí° Practice Tips</h4>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="mb-2">üéØ Start Simple</h6>
                                        <p class="text-sm text-secondary mb-0">Begin with basic elements like text fields and buttons before moving to complex interactions.</p>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="mb-2">üîß Use Browser DevTools</h6>
                                        <p class="text-sm text-secondary mb-0">Inspect elements to understand their properties and choose the best locator strategy.</p>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="mb-2">‚ö° Practice Waits</h6>
                                        <p class="text-sm text-secondary mb-0">Use the dynamic content sections to practice different wait strategies and timing.</p>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="mb-2">üìù Write Test Cases</h6>
                                        <p class="text-sm text-secondary mb-0">Create complete test scenarios combining multiple element interactions.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center justify-center gap-4 mt-6">
                        <button id="resetProgress" class="btn btn-secondary">Reset Progress</button>
                        <button id="exportProgress" class="btn btn-secondary">Export Progress</button>
                    </div>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content-area">
                <div id="welcomeScreen" class="welcome-screen">
                    <div class="card">
                        <div class="card-header text-center">
                            <h2>üëã Welcome to Your Practice Portal!</h2>
                            <p class="text-secondary">This interactive platform will guide you through your interview preparation journey.</p>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2 mb-6">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <span class="text-4xl mb-3 block">üìö</span>
                                        <h3 class="mb-2">Structured Learning</h3>
                                        <p class="text-secondary">Follow a day-by-day schedule with clear objectives</p>
                                    </div>
                                </div>
                                <div class="card text-center">
                                    <div class="card-body">
                                        <span class="text-4xl mb-3 block">‚úÖ</span>
                                        <h3 class="mb-2">Track Progress</h3>
                                        <p class="text-secondary">Mark tasks as complete and monitor your advancement</p>
                                    </div>
                                </div>
                                <div class="card text-center">
                                    <div class="card-body">
                                        <span class="text-4xl mb-3 block">üíª</span>
                                        <h3 class="mb-2">Hands-on Practice</h3>
                                        <p class="text-secondary">Code examples and exercises for each topic</p>
                                    </div>
                                </div>
                                <div class="card text-center">
                                    <div class="card-body">
                                        <span class="text-4xl mb-3 block">üéØ</span>
                                        <h3 class="mb-2">Interview Ready</h3>
                                        <p class="text-secondary">Prepare systematically for automation testing roles</p>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-success">
                                <h3 class="mb-3">üöÄ Get Started</h3>
                                <p class="mb-3">Select a week from the sidebar to begin your practice journey!</p>
                                <ul class="mb-0">
                                    <li>Choose your preferred track (Fast/Standard/Comfortable)</li>
                                    <li>Click on any week to see the daily breakdown</li>
                                    <li>Complete tasks and mark them as done</li>
                                    <li>Track your overall progress</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="dayContent" class="day-content" style="display: none;">
                    <div class="card mb-6">
                        <div class="card-header flex items-center justify-between">
                            <button id="backBtn" class="btn btn-secondary">‚Üê Back to Weeks</button>
                            <h2 id="dayTitle" class="mb-0">Day 1</h2>
                            <div class="flex items-center gap-2">
                                <span id="dayWeek" class="badge badge-primary">Week 1</span>
                                <span id="dayTrack" class="badge badge-secondary">Standard Track</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 mb-6">
                        <div class="card">
                            <div class="card-header">
                                <h3>üìã Today's Focus</h3>
                            </div>
                            <div class="card-body">
                                <p id="dayFocus" class="mb-0">Loading...</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3>‚è±Ô∏è Time Commitment</h3>
                            </div>
                            <div class="card-body">
                                <p id="dayTime" class="mb-0">Loading...</p>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>‚úÖ Tasks & Objectives</h3>
                        </div>
                        <div class="card-body">
                            <div id="tasksList" class="tasks-list">
                                <!-- Tasks will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üíª Practice Exercises</h3>
                        </div>
                        <div class="card-body">
                            <div id="practiceList" class="practice-list">
                                <!-- Practice exercises will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üìö Resources</h3>
                        </div>
                        <div class="card-body">
                            <div id="resourcesList" class="resources-list">
                                <!-- Resources will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center justify-center gap-4">
                        <button id="markCompleteBtn" class="btn btn-primary btn-lg">Mark Day as Complete</button>
                        <button id="nextDayBtn" class="btn btn-primary btn-lg" style="display: none;">Next Day ‚Üí</button>
                    </div>
                </div>

                <!-- Interview Question Detail View -->
                <div id="questionContent" class="question-content" style="display: none;">
                    <div class="card mb-6">
                        <div class="card-header flex items-center justify-between">
                            <button id="backToQuestionsBtn" class="btn btn-secondary">‚Üê Back to Questions</button>
                            <h2 id="questionTitle" class="mb-0">Question</h2>
                            <div class="flex items-center gap-2">
                                <span id="questionDifficulty" class="badge badge-warning">Medium</span>
                                <span id="questionTopic" class="badge badge-info">Topic</span>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>‚ùì Question</h3>
                        </div>
                        <div class="card-body">
                            <p id="questionText" class="question-text"></p>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üí° Answer</h3>
                        </div>
                        <div class="card-body">
                            <div id="questionAnswer" class="question-answer"></div>
                        </div>
                    </div>

                    <div class="card mb-6" id="codeSection" style="display: none;">
                        <div class="card-header">
                            <h3>üíª Code Example</h3>
                        </div>
                        <div class="card-body">
                            <pre><code id="questionCode"></code></pre>
                        </div>
                    </div>

                    <div class="card mb-6" id="companiesSection">
                        <div class="card-header">
                            <h3>üè¢ Asked By Companies</h3>
                        </div>
                        <div class="card-body">
                            <div id="companiesList" class="companies-list"></div>
                        </div>
                    </div>

                    <div class="card mb-6" id="followUpSection" style="display: none;">
                        <div class="card-header">
                            <h3>üîÑ Follow-up Questions</h3>
                        </div>
                        <div class="card-body">
                            <ul id="followUpList"></ul>
                        </div>
                    </div>

                    <div class="card mb-6">
                        <div class="card-header">
                            <h3>üìä Applicable For</h3>
                        </div>
                        <div class="card-body">
                            <div id="experienceLevels" class="experience-badges"></div>
                        </div>
                    </div>

                    <div class="flex items-center justify-center gap-4">
                        <button id="markQuestionStudied" class="btn btn-primary btn-lg">Mark as Studied</button>
                        <button id="nextQuestionBtn" class="btn btn-secondary btn-lg">Next Question ‚Üí</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal for Practice Details -->
    <div id="practiceModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Practice Exercise</h2>
            <div id="modalBody">
                <!-- Practice details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="card">
                <div class="card-header flex items-center justify-between">
                    <h2 class="mb-0">‚öôÔ∏è Settings</h2>
                    <button class="btn btn-secondary" id="closeSettingsBtn" aria-label="Close Settings">
                        <span>&times;</span>
                    </button>
                </div>

                <div class="card-body">
                    <div class="nav-tabs mb-6">
                        <button class="nav-tab active" data-tab="general">General</button>
                        <button class="nav-tab" data-tab="display">Display</button>
                        <button class="nav-tab" data-tab="study">Study</button>
                        <button class="nav-tab" data-tab="keyboard">Keyboard</button>
                        <button class="nav-tab" data-tab="data">Data</button>
                    </div>

                    <!-- General Settings Tab -->
                    <div class="settings-tab-content active" id="generalTab">
                        <div class="card mb-6">
                            <div class="card-header">
                                <h3>üé® Theme</h3>
                                <p class="text-secondary mb-0">Choose your preferred color theme</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label class="form-label" for="themeSelect">Theme</label>
                                    <select id="themeSelect" class="form-input form-select">
                                        <option value="light">‚òÄÔ∏è Light Mode</option>
                                        <option value="dark">üåô Dark Mode</option>
                                        <option value="auto">üåì Auto (System)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3>üîî Notifications</h3>
                                <p class="text-secondary mb-0">Control how you receive feedback and updates</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="notificationsEnabled" checked>
                                        <label for="notificationsEnabled" class="form-label mb-0">Enable notifications</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="notificationSound">
                                        <label for="notificationSound" class="form-label mb-0">Play notification sounds</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="achievementNotifications" checked>
                                        <label for="achievementNotifications" class="form-label mb-0">Show achievement notifications</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="streakReminders" checked>
                                        <label for="streakReminders" class="form-label mb-0">Show streak reminders</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Display Settings Tab -->
                    <div class="settings-tab-content" id="displayTab">
                        <div class="card mb-6">
                            <div class="card-header">
                                <h3>üñ•Ô∏è Layout</h3>
                                <p class="text-secondary mb-0">Customize the appearance and layout</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="compactMode">
                                        <label for="compactMode" class="form-label mb-0">Compact mode (reduce spacing)</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="showProgress" checked>
                                        <label for="showProgress" class="form-label mb-0">Show progress indicators</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="animationsEnabled" checked>
                                        <label for="animationsEnabled" class="form-label mb-0">Enable animations</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3>üìù Text</h3>
                                <p class="text-secondary mb-0">Adjust text size and readability</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label class="form-label" for="fontSize">Font size</label>
                                    <select id="fontSize" class="form-input form-select">
                                        <option value="small">Small</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="large">Large</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Study Settings Tab -->
                    <div class="settings-tab-content" id="studyTab">
                        <div class="card">
                            <div class="card-header">
                                <h3>üéØ Goals</h3>
                                <p class="text-secondary mb-0">Set your learning targets and preferences</p>
                            </div>
                            <div class="card-body">
                                <div class="grid grid-cols-2">
                                    <div class="form-group">
                                        <label class="form-label" for="dailyGoal">Daily goal (days per week)</label>
                                        <input type="number" id="dailyGoal" class="form-input" min="1" max="7" value="1">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="weeklyGoal">Weekly goal (days per week)</label>
                                        <input type="number" id="weeklyGoal" class="form-input" min="1" max="7" value="5">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="autoMarkComplete">
                                        <label for="autoMarkComplete" class="form-label mb-0">Auto-mark tasks as complete</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="showDifficulty" checked>
                                        <label for="showDifficulty" class="form-label mb-0">Show question difficulty</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Keyboard Settings Tab -->
                    <div class="settings-tab-content" id="keyboardTab">
                        <div class="card">
                            <div class="card-header">
                                <h3>‚å®Ô∏è Shortcuts</h3>
                                <p class="text-secondary mb-0">Enable keyboard shortcuts for faster navigation</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group mb-6">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="keyboardEnabled" checked>
                                        <label for="keyboardEnabled" class="form-label mb-0">Enable keyboard shortcuts</label>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2">
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Dashboard</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">Ctrl</span>
                                                <span class="badge badge-secondary">D</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Schedule</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">Ctrl</span>
                                                <span class="badge badge-secondary">S</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Questions</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">Ctrl</span>
                                                <span class="badge badge-secondary">Q</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Search</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">/</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Toggle Theme</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">Ctrl</span>
                                                <span class="badge badge-secondary">T</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-4">
                                        <div class="card-body flex items-center justify-between">
                                            <span class="font-medium">Close Modal</span>
                                            <div class="flex items-center gap-1">
                                                <span class="badge badge-secondary">Esc</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Settings Tab -->
                    <div class="settings-tab-content" id="dataTab">
                        <div class="card mb-6">
                            <div class="card-header">
                                <h3>üíæ Export & Import</h3>
                                <p class="text-secondary mb-0">Backup and restore your progress and settings</p>
                            </div>
                            <div class="card-body">
                                <div class="flex items-center gap-4">
                                    <button id="exportDataBtn" class="btn btn-secondary">üì§ Export Data</button>
                                    <button id="importDataBtn" class="btn btn-secondary">üì• Import Data</button>
                                </div>
                            </div>
                        </div>

                        <div class="card mb-6">
                            <div class="card-header">
                                <h3>üîÑ Reset</h3>
                                <p class="text-secondary mb-0">Clear all data and start fresh</p>
                            </div>
                            <div class="card-body">
                                <button id="resetSettingsBtn" class="btn btn-danger">üîÑ Reset Settings</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3>üîí Privacy</h3>
                                <p class="text-secondary mb-0">Control data collection and usage</p>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="analytics" checked>
                                        <label for="analytics" class="form-label mb-0">Allow usage analytics</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="checkbox-group flex items-center gap-2">
                                        <input type="checkbox" id="crashReporting" checked>
                                        <label for="crashReporting" class="form-label mb-0">Enable crash reporting</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-footer flex items-center justify-between">
                    <span class="text-secondary">v2.0.0</span>
                    <button id="saveSettingsBtn" class="btn btn-primary">üíæ Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PWA Installation Banner -->
    <div id="pwaInstallBanner" class="notification" style="display: none;">
        <div class="notification-content">
            <span class="notification-icon">üì±</span>
            <div class="notification-message">
                <strong>Install Interview Prep App</strong>
                <small>Get offline access and app-like experience</small>
            </div>
            <div class="flex items-center gap-2">
                <button id="pwaInstallBtn" class="btn btn-primary btn-sm">Install</button>
                <button id="pwaDismissBtn" class="notification-close">√ó</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <!-- Load embedded data first for offline capability -->
    <script src="js/embedded-data.js"></script>

    <!-- Load performance and bundling modules first -->
    <script src="js/performance-manager.js"></script>
    <script src="js/module-bundler.js"></script>
    <script src="js/analytics-manager.js"></script>

    <!-- Phase 7 - Content Management & Advanced Features -->
    <script src="js/content-management-system.js"></script>
    <script src="js/adaptive-learning-engine.js"></script>
    <script src="js/social-features-system.js"></script>
    <script src="js/external-integration-system.js"></script>

    <!-- Load modular JavaScript files -->
    <script src="js/ui-utils.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/api-v2-client.js"></script>
    <script src="js/offline-storage.js"></script>
    <script src="js/conflict-resolver.js"></script>
    <script src="js/offline-progress-tracker.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/question-manager.js"></script>
    <script src="js/progress-manager.js"></script>
    <script src="app-modular.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        // ===================================
        // PWA SERVICE WORKER REGISTRATION
        // ===================================

        let deferredPrompt;
        let pwaInstallBanner;
        let installButton;
        let dismissButton;

        // Register service worker (only for HTTP/HTTPS)
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', async () => {
                try {
                    // Try enhanced service worker first, fallback to basic
                    let registration;
                    try {
                        registration = await navigator.serviceWorker.register('/sw-enhanced.js');
                        console.log('‚úÖ Enhanced Service Worker registered:', registration);
                    } catch (enhancedError) {
                        console.warn('‚ö†Ô∏è Enhanced Service Worker failed, using basic SW:', enhancedError);
                        registration = await navigator.serviceWorker.register('/sw.js');
                        console.log('‚úÖ Basic Service Worker registered:', registration);
                    }

                    // Check for updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        console.log('üîÑ New Service Worker installing...');

                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed') {
                                if (navigator.serviceWorker.controller) {
                                    // Show update available notification
                                    showUpdateAvailable();
                                } else {
                                    console.log('‚úÖ Service Worker installed for first time');
                                }
                            }
                        });
                    });

                } catch (error) {
                    console.error('‚ùå Service Worker registration failed:', error);
                }
            });

            // Listen for controlling service worker change
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                console.log('üîÑ New Service Worker controlling the page');
                window.location.reload();
            });
        }

        // ===================================
        // PWA INSTALLATION PROMPT
        // ===================================

        window.addEventListener('DOMContentLoaded', () => {
            pwaInstallBanner = document.getElementById('pwaInstallBanner');
            installButton = document.getElementById('pwaInstallBtn');
            dismissButton = document.getElementById('pwaDismissBtn');

            // Setup event listeners
            if (installButton) {
                installButton.addEventListener('click', installPWA);
            }
            if (dismissButton) {
                dismissButton.addEventListener('click', dismissInstallBanner);
            }
        });

        // Capture the beforeinstallprompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('üì± PWA install prompt available');

            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();

            // Stash the event so it can be triggered later
            deferredPrompt = e;

            // Show our custom install banner
            showInstallBanner();
        });

        // Handle app installed event
        window.addEventListener('appinstalled', (e) => {
            console.log('‚úÖ PWA was installed successfully');
            hideInstallBanner();

            // Show success notification
            if (typeof portal !== 'undefined' && portal.showErrorMessage) {
                portal.showErrorMessage('üéâ App installed successfully! You can now use it offline.', 'success');
            }

            // Clear the deferredPrompt
            deferredPrompt = null;
        });

        // Show install banner
        function showInstallBanner() {
            // Check if user has already dismissed the banner recently
            const dismissed = localStorage.getItem('pwa-banner-dismissed');
            const dismissTime = dismissed ? parseInt(dismissed) : 0;
            const daysSinceDismiss = (Date.now() - dismissTime) / (1000 * 60 * 60 * 24);

            // Check if user has engaged enough to show install prompt
            const pageViews = parseInt(localStorage.getItem('pwa-page-views') || '0');
            const studyTime = parseInt(localStorage.getItem('pwa-study-time') || '0');
            const questionsStudied = parseInt(localStorage.getItem('pwa-questions-studied') || '0');

            // Show banner if conditions are met
            const shouldShow =
                daysSinceDismiss > 7 && // Not dismissed in last 7 days
                (pageViews >= 3 || studyTime >= 300000 || questionsStudied >= 5) && // User engaged
                !isPWA(); // Not already installed

            if (shouldShow && pwaInstallBanner) {
                // Create enhanced install prompt with benefits
                updateInstallBannerContent();
                pwaInstallBanner.style.display = 'block';
                pwaInstallBanner.classList.add('show');

                // Track install prompt shown
                console.log('üì± PWA install banner shown');

                // Auto-hide after 15 seconds (longer for better UX)
                setTimeout(() => {
                    if (pwaInstallBanner.style.display !== 'none') {
                        hideInstallBanner();
                    }
                }, 15000);

                // Show reminder after 2 minutes if still on page
                setTimeout(() => {
                    if (!isPWA() && document.visibilityState === 'visible') {
                        showInstallReminder();
                    }
                }, 120000);
            }
        }

        // Update banner content with personalized benefits
        function updateInstallBannerContent() {
            const questionsStudied = parseInt(localStorage.getItem('pwa-questions-studied') || '0');
            const studyTime = parseInt(localStorage.getItem('pwa-study-time') || '0');
            const studyHours = Math.round(studyTime / (1000 * 60 * 60));

            let personalizedMessage = 'Get offline access and app-like experience';

            if (questionsStudied > 0) {
                personalizedMessage = `Continue studying your ${questionsStudied} questions offline`;
            } else if (studyHours > 0) {
                personalizedMessage = `Keep your ${studyHours}h+ of progress safe offline`;
            }

            const bannerText = pwaInstallBanner.querySelector('.pwa-banner-text small');
            if (bannerText) {
                bannerText.textContent = personalizedMessage;
            }
        }

        // Show install reminder (subtle notification)
        function showInstallReminder() {
            const reminder = document.createElement('div');
            reminder.className = 'pwa-install-reminder';
            reminder.innerHTML = `
                <div class="reminder-content">
                    <span class="reminder-icon">üí°</span>
                    <span class="reminder-text">Tip: Install the app for faster access and offline studying!</span>
                    <button class="reminder-install" onclick="showInstallBanner(); this.parentElement.parentElement.remove()">Install</button>
                    <button class="reminder-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
            `;

            // Add styles
            reminder.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #fff;
                border: 1px solid #e0e0e0;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10001;
                max-width: 320px;
                animation: slideInRight 0.3s ease;
            `;

            document.body.appendChild(reminder);

            // Auto-remove after 8 seconds
            setTimeout(() => {
                if (reminder.parentElement) {
                    reminder.remove();
                }
            }, 8000);
        }

        // Track user engagement for install prompting
        function trackEngagement() {
            // Track page views
            const currentViews = parseInt(localStorage.getItem('pwa-page-views') || '0');
            localStorage.setItem('pwa-page-views', (currentViews + 1).toString());

            // Track time spent
            let sessionStart = Date.now();
            let totalTime = parseInt(localStorage.getItem('pwa-study-time') || '0');

            const updateTime = () => {
                const sessionTime = Date.now() - sessionStart;
                localStorage.setItem('pwa-study-time', (totalTime + sessionTime).toString());
            };

            // Update time on visibility change and beforeunload
            document.addEventListener('visibilitychange', updateTime);
            window.addEventListener('beforeunload', updateTime);

            // Track questions studied (if available)
            if (window.portal && window.portal.progressManager) {
                const originalMarkStudied = window.portal.progressManager.markQuestionStudied;
                if (originalMarkStudied) {
                    window.portal.progressManager.markQuestionStudied = function(...args) {
                        const result = originalMarkStudied.apply(this, args);
                        const questionsStudied = parseInt(localStorage.getItem('pwa-questions-studied') || '0');
                        localStorage.setItem('pwa-questions-studied', (questionsStudied + 1).toString());
                        return result;
                    };
                }
            }

            // Show install prompt based on engagement
            setTimeout(() => {
                if (!isPWA() && deferredPrompt) {
                    const views = parseInt(localStorage.getItem('pwa-page-views') || '0');
                    const time = parseInt(localStorage.getItem('pwa-study-time') || '0');
                    const questions = parseInt(localStorage.getItem('pwa-questions-studied') || '0');

                    // Show after sufficient engagement
                    if (views >= 3 && time >= 180000) { // 3 views and 3+ minutes
                        showInstallBanner();
                    }
                }
            }, 30000); // Check after 30 seconds
        }

        // Hide install banner
        function hideInstallBanner() {
            if (pwaInstallBanner) {
                pwaInstallBanner.style.display = 'none';
                pwaInstallBanner.classList.remove('show');
            }
        }

        // Install PWA
        async function installPWA() {
            if (!deferredPrompt) {
                console.log('‚ùå No deferred prompt available');
                return;
            }

            try {
                // Show the prompt
                deferredPrompt.prompt();

                // Wait for the user to respond to the prompt
                const { outcome } = await deferredPrompt.userChoice;

                console.log(`üë§ User response to install prompt: ${outcome}`);

                if (outcome === 'accepted') {
                    console.log('‚úÖ User accepted the install prompt');
                } else {
                    console.log('‚ùå User dismissed the install prompt');
                }

                // Clear the deferred prompt
                deferredPrompt = null;
                hideInstallBanner();

            } catch (error) {
                console.error('‚ùå Error showing install prompt:', error);
            }
        }

        // Dismiss install banner
        function dismissInstallBanner() {
            hideInstallBanner();
            // Remember that user dismissed the banner
            localStorage.setItem('pwa-banner-dismissed', Date.now().toString());
            console.log('üë§ User dismissed PWA install banner');
        }

        // Show update available notification
        function showUpdateAvailable() {
            if (typeof portal !== 'undefined' && portal.showErrorMessage) {
                portal.showErrorMessage('üîÑ App update available! Refresh to get the latest version.', 'info');
            }

            // Show refresh button in corner
            const updateBanner = document.createElement('div');
            updateBanner.className = 'update-banner';
            updateBanner.innerHTML = `
                <div class="update-content">
                    <span>üîÑ Update available!</span>
                    <button onclick="window.location.reload()" class="btn-update">Refresh</button>
                    <button onclick="this.parentElement.parentElement.remove()" class="btn-update-close">√ó</button>
                </div>
            `;
            document.body.appendChild(updateBanner);
        }

        // ===================================
        // PWA UTILITY FUNCTIONS
        // ===================================

        // Check if running as PWA
        function isPWA() {
            return window.matchMedia('(display-mode: standalone)').matches ||
                   window.navigator.standalone === true ||
                   document.referrer.includes('android-app://');
        }

        // Get installation status
        function getInstallationStatus() {
            return {
                isPWA: isPWA(),
                canInstall: !!deferredPrompt,
                serviceWorkerSupported: 'serviceWorker' in navigator,
                serviceWorkerRegistered: navigator.serviceWorker.controller !== null
            };
        }

        // Add PWA status to global scope
        window.pwaStatus = {
            isPWA,
            getInstallationStatus,
            installPWA,
            showInstallBanner,
            hideInstallBanner
        };

        // Log PWA status
        window.addEventListener('load', () => {
            const status = getInstallationStatus();
            console.log('üì± PWA Status:', status);

            if (status.isPWA) {
                console.log('‚úÖ Running as installed PWA');
                // Hide install banner if running as PWA
                hideInstallBanner();
            } else {
                // Start tracking engagement for install promotion
                trackEngagement();
            }

            // Initialize performance and analytics systems
            initializePerformanceSystem();
        });

        // Initialize performance monitoring and analytics
        async function initializePerformanceSystem() {
            try {
                // Initialize Performance Manager
                if (typeof PerformanceManager !== 'undefined') {
                    window.performanceManager = new PerformanceManager();
                    window.performanceManager.setupInteractionTracking();
                    window.performanceManager.optimizeImages();
                    console.log('‚ö° Performance Manager initialized');
                }

                // Initialize Analytics Manager
                if (typeof AnalyticsManager !== 'undefined') {
                    window.analyticsManager = new AnalyticsManager();
                    console.log('üìä Analytics Manager initialized');

                    // Example A/B test
                    const buttonVariant = window.analyticsManager.initializeABTest(
                        'button_color_test',
                        ['blue', 'green', 'red'],
                        { trafficAllocation: 0.5 }
                    );

                    if (buttonVariant) {
                        console.log(`üß™ A/B Test: Button variant ${buttonVariant}`);
                    }
                }

                // Setup performance monitoring
                if (window.performanceManager) {
                    // Wrap API functions for performance tracking
                    if (window.apiV2Client) {
                        const originalGetQuestions = window.apiV2Client.getQuestions;
                        window.apiV2Client.getQuestions = window.performanceManager.wrapAPIFunction(
                            originalGetQuestions,
                            'getQuestions'
                        );
                    }

                    // Monitor virtual scrolling performance
                    const questionsList = document.getElementById('questionsList');
                    if (questionsList) {
                        window.performanceManager.registerLazyElement(questionsList, () => {
                            console.log('üìú Questions list loaded lazily');
                        });
                    }
                }

                console.log('üöÄ Performance system fully initialized');

            } catch (error) {
                console.error('‚ùå Failed to initialize performance system:', error);
            }
        }

        // Handle PWA lifecycle
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible' && isPWA()) {
                console.log('üëÅÔ∏è PWA became visible');
                // Could trigger background sync or updates here
            }
        });

        console.log('üöÄ PWA initialization complete');
    </script>
</body>
</html>